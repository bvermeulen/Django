{% extends 'base.html' %}

{% block breadcrumb %}
<ol class="breadcrumb my-4">
  <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
  <li class="breadcrumb-item active">Stock Quotes</li>
</ol>
{% endblock %}

{% block content %}
{% now "Y-m-d" as current_date %}
<form id="stockquote" method="post">
{% csrf_token %}
<div>
  {{ form.quote_string }}
  <input type='submit' value='Quote' class="btn-sm btn-primary"></input>
</div>
<br>
<table class="table table-striped mb-4">
  <thead class="thead-inverse">
  <tr>
    <th>Symbol</th>
    <th>Company</th>
    <th>Market</th>
    <th>Currency</th>
    <th>Price</th>
    <th>Change</th>
    <th>Percentage</th>
    <th>Low</th>
    <th>High</th>
    <th>Previous</th>
    <th>Last trade</th>
  </tr>
  </thead>
  <tbody>
  {% for stock in stock_info %}
    <tr>
    <td class="align-left">{{ stock.symbol }}</td>
    <td class="align-left">{{ stock.name|truncatechars:20 }}</td>
    <td class="align-left">{{ stock.stock_exchange_short }}</td>
    <td class="align-left">{{ stock.currency }}</td>
    <td class="align-left">{{ stock.price }}</td>
    <td class="align-left">{{ stock.day_change }}</td>
    <td class="align-left">{{ stock.change_pct }}%</td>
    <td class="align-left">{{ stock.day_low }}</td>
    <td class="align-left">{{ stock.day_high }}</td>
    <td class="align-left">{{ stock.close_yesterday }}</td>
    {% if current_date > stock.last_trade_time|date:"Y-m-d" %}
      <td class="align-left">{{ stock.last_trade_time|date:"j M y, H:i" }}</td>
    {% else %}
      <td class="align-left">{{ stock.last_trade_time|date:"h:i a" }}</td>
    {% endif %}
    </tr>
  {% endfor %}
</table>
</form>
<br><br><br><br>
{% endblock content %}

{% block javascript %}
{% endblock %}
