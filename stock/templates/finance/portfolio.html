{% extends 'base.html' %}

{% load static %}
{% load crispy_forms_tags %}

{% block title %}Portfolio{% endblock %}

{% block stylesheet %}
  <link rel="stylesheet" type="text/css" href="{% static 'css/container-styles.css' %}">
{% endblock %}

{% block breadcrumb %}
<ol class="breadcrumb my-4">
  <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
  <li class="breadcrumb-item active">Portfolio</li>
</ol>
{% endblock %}

{% block content %}
  {% now "Y-m-d" as current_date %}

  <form id="id_portfolio" method="post">
    {% csrf_token %}
    <div class="flex-container" style="min-height:10vh">
      <div class="left" style="min-height:50%;">
        <strong>Portfolios</strong><br>
        <button type="submit" class="btn btn-outline-secondary btn-sm" name="new_portfolio"
                value="new_portfolio">New</button>
      </div>

      <div class="right" style="min-height:50%">
        {{ form.portfolio_name }}
        {{ form.currency }}
        <br>
        {{ form.symbol }}
      </div>
    </div>

    <div class="flex-container" style="min-height:70vh">
      <div class="left" style="min-height:50%;">
        {% for portfolio in form.portfolios %}
          <p>
          {% if portfolio.choice_label == form.portfolio_name.value %}
            <button type="submit" class="btn btn-primary btn-sm"
              value={{ portfolio }}</button>

          {% else %}
            <button type="submit" class="btn btn-light btn-sm"
              value={{ portfolio }}</button>
          {% endif %}
          </p>
        {% endfor %}
      </div>

      <div class="right" style="min-height:100%;">
        <table class="table table-fixed table-striped md-4 table-sm">
          <thead class="custom-thead-grey">
            <tr>
              <th>Company</th>
              <th>Symbol</th>
              <th>Qty</th>
            </tr>
          </thead>
          <tbody>
            {% for stock in stocks %}
              <tr>
                <td>{{ stock.stock.company }}</td>
                <td>{{ stock.stock.symbol }}</td>
                <td>{{ stock.quantity }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
        <!-- </div> -->
    </div>
  </form>
  <br><br><br><br>
{% endblock content %}

{% block javascript %}
{% endblock %}
