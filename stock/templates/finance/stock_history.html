{% extends 'base.html' %}<html>

{% load static %}
{% load stock_tags %}

{%block title %}Stock History{% endblock %}

{% block navbutton %}
<ul class="navbar-nav mr-auto">
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle mr-1" href="#" data-toggle="dropdown">
      Stock history
    </a>
    <div class="dropdown-menu dropdown-menu-left">
      <a class="dropdown-item" href="{% url 'stock_intraday' source stock_symbol %}">Latest stock trading</a>
      {% if source == 'quotes' %}
        <a class="dropdown-item" href="{% url 'stock_quotes' %}">Quotes</a>
      {% else %}
        <a class="dropdown-item" href="{% url 'portfolio' %}">Portfolio</a>
      {% endif %}
      <a class="dropdown-item" href="{% url 'home' %}">Home</a>
    </div>
  </li>
</ul>
{% endblock %}

{% block content %}

	<div id="chart-container">FusionCharts()</div>
	<div>
    <button class="btn btn-primary btn-sm"
      onclick="window.location.href='{% url 'stock_intraday' source stock_symbol %}'">Latest stock trading</button>
    {% if period != periods|index:3 %}
      <button class="btn btn-primary btn-sm"
        onclick="window.location.href='{% url 'stock_history' source stock_symbol periods|index:3 %}'">History ({{periods|index:3}})</button>
    {% endif %}
    {% if period != periods|index:2 %}
      <button class="btn btn-primary btn-sm"
        onclick="window.location.href='{% url 'stock_history' source stock_symbol periods|index:2 %}'">{{periods|index:2}} years</button>
    {% endif %}
    {% if period != periods|index:1 %}
      <button class="btn btn-primary btn-sm"
        onclick="window.location.href='{% url 'stock_history' source stock_symbol periods|index:1 %}'">{{periods|index:1}} year</button>
    {% endif %}
    {% if period != periods|index:0 %}
      <button class="btn btn-primary btn-sm"
        onclick="window.location.href='{% url 'stock_history' source stock_symbol periods|index:0 %}'">{{periods|index:0}} year</button>
    {% endif %}
  </div>
  <br>
	<small>Data provided by <a href="https://{{ data_provider_url }}">{{ data_provider_url }}</a></small>
	<br><br><br><br>

{% endblock content %}

{% block javascript %}
	<script type="text/javascript" src="{% static "fusioncharts/types/fusioncharts.js" %}"></script>
	<script type="text/javascript" src="{% static "fusioncharts/themes/fusioncharts.theme.candy.js" %}"></script>
  <script type="text/javascript" src="{% static "fusioncharts/themes/fusioncharts.theme.fusion.js" %}"></script>
	{{ chart_js|safe }}
{% endblock javascript %}
